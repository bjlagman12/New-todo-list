var todoList = {
todos:[],
addTodos: function(todoText){
  this.todos.push({
  todoText:todoText,
  completed:false
    });
  view.displayTodos();
  },
changeTodos: function(position,todoText){
  // this.todos[position]=todoText(newtodo)
  this.todos[position].todoText=todoText;
  view.displayTodos();
  },
deleteTodos:function(position){
  this.todos.splice(position,1);
  view.displayTodos();
  },
toggleCompleted: function(position){
  // this.todos[position].completed=
  // !this.todos[position].completed;
  var todo = this.todos[position];
  todo.completed= !todo.completed;
  view.displayTodos();
  },
toggleAll:function(){
  var totalTodos = this.todos.length;
  var completedTodos = 0;

  //get number of completed todos
  for(var i=0; i< totalTodos;i++){
    if(this.todos[i].completed===true){
      completedTodos++;
    }
  }
    // case 1: if everythings true, make everything false.
    if(completedTodos===totalTodos){
      for (var i=0; i< totalTodos; i++){
        this.todos[i].completed = false;
      }
    }
    //case 2:otherwise, make everything true
    else{
      for(var i=0; i< totalTodos; i++){
        this.todos[i].completed=true;
      }
    }
    view.displayTodos();
  }
};

var handlers={
  addTodos:function(){
    var addTodoTextInput = document.getElementById('addTodoTextInput');
    todoList.addTodos(addTodoTextInput.value);
    addTodoTextInput.value='';  
  },
  changeTodos:function(){
    var changeTodoPositionInput = document.getElementById('changeTodoPositionInput')
    var changeTodoTextInput = document.getElementById('changeTodoTextInput')

    todoList.changeTodos(changeTodoPositionInput.valueAsNumber,changeTodoTextInput.value);

    changeTodoPositionInput.valueAsNumber='';
    changeTodoTextInput.value='';

  },
  deleteTodos:function(){
    var deleteTodoPositionInput = document.getElementById('deleteTodoPositionInput')

    todoList.deleteTodos(deleteTodoPositionInput.valueAsNumber);
    deleteTodoPositionInput.valueAsNumber='';
  },
  toggleCompleted:function(){
    var toggleCompletedPositionInput = document.getElementById('toggleCompletedPositionInput')

    todoList.toggleCompleted(toggleCompletedPositionInput.valueAsNumber);
    toggleCompletedPositionInput.valueAsNumber='';
  },
  toggleAll:function(){
    todoList.toggleAll()
  },
}

var view= {
  displayTodos:function(){
    var todosUl=document.querySelector('Ul');
    todosUl.innerHTML = '';

    for (var i=0; i<todoList.todos.length;i++){
      var todoLi=document.createElement('Li');
      var todo =todoList.todos[i]
      var todoWithCompletion='';
    
    if(todo.completed===true){
      todoWithCompletion= '(x)'+todo.todoText
      }
    else{
      todoWithCompletion= '()'+todo.todoText
      }

    todoLi.textContent= todoWithCompletion;
    todosUl.appendChild(todoLi);
    }
  }
}


